<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Registrar venda | Sistema Influenciadoras</title>
    <link rel="stylesheet" href="style.css" />
    <script defer src="main.js"></script>
  </head>
  <body data-page="master-sales">
    <main id="conteudo-principal" class="container">
      <header>
        <h1>Registrar venda</h1>
        <p>Associe as vendas aos cupons das influenciadoras.</p>
        <button type="button" data-action="logout">Sair</button>
      </header>

      <section class="card">
        <nav class="link-grid section-nav" aria-label="Navegação secundária">
          <a class="link-card" href="master-create.html">Cadastrar</a>
          <a class="link-card" href="master-consult.html">Consulta</a>
          <a class="link-card" href="master-list.html">Lista cadastrada</a>
          <a class="link-card" href="master-sku-points.html">Pontos por SKU</a>
        </nav>
        <form id="createSaleForm">
          <div class="form-grid compact">
            <label>Pedido*<input name="orderNumber" type="text" required /></label>
            <label>
              Cupom*
              <select name="saleCoupon" id="saleCouponSelect" required>
                <option value="">Selecione um cupom</option>
              </select>
            </label>
            <label>Data*<input name="saleDate" type="date" required /></label>
            <label>Pontos calculados<input name="points" type="number" min="0" step="1" readonly /></label>
            <label>Valor estimado (R$)<input name="pointsValue" type="number" min="0" step="0.01" readonly /></label>
          </div>
          <div class="card spaced-above-md">
            <h2>Itens da venda</h2>
            <p class="note">Selecione o SKU e informe a quantidade vendida para calcular os pontos.</p>
            <div class="table-wrapper spaced-above-sm">
              <table id="saleItemsTable">
                <thead>
                  <tr>
                    <th>SKU</th>
                    <th>Descrição</th>
                    <th>Qtd.</th>
                    <th>Pontos/un.</th>
                    <th>Pontos</th>
                    <th>Ações</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
            <div class="button-row spaced-above-sm">
              <button type="button" id="addSaleItemButton">Adicionar item</button>
            </div>
          </div>
          <div class="button-row spaced-above-md">
            <button type="submit">Registrar venda</button>
            <button type="button" class="secondary-button" id="cancelSaleEditButton">Cancelar edicao</button>
          </div>
        </form>
        <div id="salesMessage" class="message" aria-live="polite"></div>
        <div class="page-toolbar spaced-above-md">
          <div>
            <h2>Vendas cadastradas</h2>
            <p class="note">Use os botoes para editar ou excluir.</p>
          </div>
          <button type="button" id="reloadSalesButton">Recarregar vendas</button>
        </div>
        <div class="table-wrapper">
          <table id="salesTable">
            <thead>
              <tr>
                <th>Pedido</th>
                <th>Cupom</th>
                <th>Data</th>
                <th>Pontos</th>
                <th>Valor (R$)</th>
                <th>Acoes</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
        <div id="salesSummary" class="summary"></div>
      </section>
      <section class="card" id="bulkSalesSection">
        <h2>Importar vendas em massa</h2>
        <p class="note">
          Importe o arquivo CSV exportado do Shopify ou cole os dados seguindo as colunas: Pedido, Cupom, Data e
          Pontos. Em seguida, analise os resultados e confirme o salvamento quando estiver tudo certo.
        </p>
        <label>
          Arquivo CSV
          <input id="salesImportFile" type="file" accept=".csv,text/csv" />
        </label>
        <label class="stacked">
          Dados das vendas
          <textarea
            id="salesImportInput"
            rows="8"
            placeholder="Pedido&#9;Cupom&#9;Data&#9;Pontos"
          ></textarea>
        </label>
        <div class="button-row">
          <button type="button" id="analyzeSalesImportButton">Analisar dados</button>
          <button type="button" class="secondary-button" id="clearSalesImportButton">Limpar</button>
        </div>
        <div id="salesImportMessage" class="message" aria-live="polite"></div>
        <div class="table-wrapper">
          <table id="salesImportTable">
            <thead>
              <tr>
                <th>Status</th>
                <th>Pedido</th>
                <th>Cupom</th>
                <th>Data</th>
                <th>Pontos</th>
                <th>Valor (R$)</th>
                <th>Observações</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
        <div id="salesImportSummary" class="summary"></div>
        <div class="button-row">
          <button type="button" id="confirmSalesImportButton" disabled>
            Salvar pedidos importados
          </button>
        </div>
      </section>
    </div>
    </main>
  </body>
</html>
